# CipherLink - 一个安全的即时通讯应用

---

## 🚀 项目概览

**CipherLink** 是一个基于 Python 构建的安全即时通讯应用程序，它不仅提供基本的聊天功能，还深度集成了先进的加密技术和信息隐藏（隐写术），确保您的通信内容既私密又安全。服务器作为消息中继，但无法读取任何加密消息，实现了真正的端到端加密。

---

## ✨ 核心功能

* **端到端加密**: 所有文本消息和图片数据都经过加密传输，只有预期的接收者才能解密和阅读。
* **安全密钥交换**: 采用 **RSA 非对称加密** 进行安全的会话密钥协商（AES 密钥），为后续的对称加密通信奠定基础。
* **AES 对称加密**: 实际的聊天消息使用高性能的 **AES 对称加密** 算法进行加密，确保通信效率和安全性。
* **隐写术**: 独特的图片消息功能，允许用户将秘密文本信息隐藏到 PNG 图片中，实现隐蔽通信。
* **用户认证**: 支持用户注册和登录，并为每个用户生成和管理 RSA 密钥对。
* **好友管理**: 用户可以发送、接受、拒绝好友请求，以及管理（添加/删除）好友列表。
* **在线状态显示**: 实时更新在线用户列表和好友在线状态。
* **未读消息提示**: 当收到非当前聊天对象的未读消息时，会在好友列表中显示提示。

---

## 🛠️ 技术栈

* **Python 3**: 项目的主要开发语言。
* **Tkinter**: 用于构建直观的用户界面 (GUI)。
* **Socket**: 实现客户端和服务器之间的网络通信。
* **`cryptography` 库**: 提供强大的加密功能 (RSA, AES)。
* **`Pillow` (PIL Fork) 库**: 处理图片操作，特别是隐写术的实现。
* **`hashlib`**: 用于密码哈希存储，增强用户凭证的安全性。

---

## 🚀 如何运行项目

在开始之前，请确保您已安装 Python 3。

### 1. 安装依赖

打开您的命令行工具（终端或命令提示符），运行以下命令安装所需的 Python 库：

```bash
pip install cryptography Pillow
```

### 2. 获取代码
将 server.py, client.py, 和 crypto_utils.py 这三个文件放在您电脑上的同一个文件夹内。

### 3. 启动服务器
首先，您需要运行服务器。
打开一个命令行窗口，导航到您项目文件所在的目录，然后执行：

```bash

python server.py

```

您将看到服务器启动并监听连接的消息，例如：[*] 服务器正在监听 0.0.0.0:8888。请保持此窗口打开。

### 4. 启动客户端 (至少两个)
为了模拟聊天环境，您需要运行至少两个客户端实例。

在同一台电脑上: 打开新的命令行窗口，导航到相同的项目目录，然后重复执行以下命令以启动多个客户端：

```bash

python client.py

```
在不同电脑上: 如果您想在不同电脑上运行客户端，请确保所有客户端的 client.py 文件中的 SERVER_HOST 变量指向运行服务器的电脑的 实际 IP 地址（例如，如果服务器的局域网 IP 是 192.168.1.100，则将 SERVER_HOST = '127.0.0.1' 改为 192.168.1.100'）。

### 🎮 使用指南
当客户端界面弹出后，按照以下步骤进行交互：

#### 注册新用户:

在登录界面，输入一个新的用户名和密码。

点击 "注册" 按钮。

按照提示输入您的邮箱。

注册成功后，您的 RSA 密钥对文件（如 your_username_private.pem 和 your_username_public.pem）将自动生成并保存在客户端运行的目录下。

#### 登录:

使用您注册的用户名和密码进行登录。

重要提示: 确保与您用户名对应的 .pem 密钥文件在客户端运行的同一目录下，这是加密通信的基础。

#### 开始聊天:

登录后，您会在左侧看到“在线用户”和“好友列表”。

点击“在线用户”列表中的一个用户名，即可选择与之聊天。如果对方是新联系人，系统会自动启动安全的密钥交换过程。

在底部的消息输入框中输入文本，按回车键或点击 "发送" 即可发送加密消息。

#### 发送藏图 (隐写术):

在聊天界面，点击 "发送藏图" 按钮。

系统会提示您输入一段想隐藏的秘密消息。

接着，选择一张 PNG 格式的图片作为载体。

图片和秘密消息将被加密并发送给聊天对象。

#### 好友管理:

在左上角的“好友管理”区域，输入其他用户的用户名。

点击 "添加" 发送好友请求。

如果收到好友请求，客户端会弹出确认框，您可以选择接受或拒绝。

点击 "移除" 可以解除与某个好友的关系。

### 💡 未来可能的增强
消息历史记录持久化: 当前聊天记录只在内存中，可以考虑保存到文件或数据库。

群组聊天: 扩展功能以支持多人群聊。

文件传输: 实现安全的文件共享功能。

通知系统: 更完善的离线消息和系统通知。

更强大的 UI/UX: 改进界面设计和用户体验。
